<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>負數加減｜數線練習與測驗</title>
<style>
  /* 保留原本的 CSS，略 */
</style>
</head>
<body>
<header>
  <div class="brand">
    <div class="logo">➕</div>
    <h1>負數加減｜數線練功房</h1>
  </div>
  <div class="toolbar">
    <div class="pill">
      <span>👤 名稱</span>
      <input id="nickname" type="text" placeholder="輸入你的暱稱…" />
    </div>
    <button id="btnSettings" class="ghost">⚙️ 設定</button>
  </div>
</header>

<div class="layout">
  <main class="card">
    <div class="mode-tabs">
      <button data-mode="practice" class="active">🌱 練習（有數線）</button>
      <button data-mode="review">🧩 錯題複習</button>
      <button data-mode="exam">🎯 測驗（無數線）</button>
    </div>

    <div class="scorebar">
      <div class="chip">⭐ 分數 <span id="score">0</span></div>
      <div class="chip">🔥 連擊 <span id="streak">0</span></div>
      <div class="chip">🎓 熟練度 <span id="mastery">0%</span></div>
      <div class="chip">🏆 最高分 <span id="best">0</span></div>
    </div>

    <div class="big-op">
      <div class="bubble" id="opA">-3</div>
      <div class="bubble" id="opSign">-</div>
      <div class="bubble" id="opB">2</div>
      <div class="bubble">=</div>
      <div>
        <!-- 改這裡 -->
        <input id="answer" type="text" inputmode="numeric" pattern="-?[0-9]*" />
      </div>
      <button id="btnSubmit">送出</button>
      <button id="btnSkip" class="flat">略過</button>
    </div>

    <div id="numlineWrap" class="numline-wrap">
      <div class="label">數線提示</div>
      <svg id="numline" viewBox="0 0 800 150"></svg>
    </div>

    <div class="answer-row">
      <div id="resultMsg" class="result-msg"></div>
      <button id="btnNext" class="hidden">下一題 ▶</button>
      <button id="btnShowSteps" class="ghost hidden">顯示步驟</button>
    </div>
  </main>

  <aside class="right-col">
    <!-- 排行榜與錯題區塊，略 -->
  </aside>
</div>

<script>
/* 保留原本 JS，大部分不變，僅修改 submitAnswer() */

function submitAnswer(){
  const userAns = parseInt(elAns.value, 10); // ✅ 改成 parseInt
  if(Number.isNaN(userAns)) {
    elMsg.textContent = '請輸入整數答案';
    elMsg.className = 'result-msg ng';
    return;
  }
  const {a,b,sign} = state;
  const correctAns = sign==='+' ? a+b : a-b;
  const ok = (userAns===correctAns);

  // （以下維持原本流程，略）
}
</script>
</body>
</html>
